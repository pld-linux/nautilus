diff -urN nautilus-2.21.91/configure.in nautilus-2.21.91.new/configure.in
--- nautilus-2.21.91/configure.in	2008-02-11 20:53:05.000000000 +0100
+++ nautilus-2.21.91.new/configure.in	2008-02-13 16:31:46.000000000 +0100
@@ -296,7 +296,14 @@
 AC_ARG_ENABLE(beagle, [  --disable-beagle     build without beagle support])
 msg_beagle=no
 if test "x$enable_beagle" != "xno"; then
-	PKG_CHECK_MODULES(BEAGLE, libbeagle-0.0 >= beagle_minver, [
+	BEAGLE_PKGCONFIG=
+	if pkg-config --exists libbeagle-1.0; then
+		BEAGLE_PKGCONFIG=libbeagle-1.0
+	else
+		BEAGLE_PKGCONFIG=libbeagle-0.0
+	fi
+
+	PKG_CHECK_MODULES(BEAGLE, $BEAGLE_PKGCONFIG >= beagle_minver, [
 		  	  AM_CONDITIONAL(HAVE_BEAGLE, true)
 			  AC_DEFINE(HAVE_BEAGLE, 1, [Define to enable beagle support])
 			  ]
